### 6.1 함수 추출하기 Extract Function

- 배경
  - 함수 외에도 메서드 method, 프로시저 procdure, 서브루틴 subroutine 등에도 똑같이 적용됨
  - 코드 조각을 찾아 무슨 일을 하는지 파악한 다음 독립된 함수로 추출하고 목적에 맞는 이름을 붙인다.
  - 코드를 보고 무슨 일을 하는지 파악하기 어렵다면, 그 부분을 함수로 추출하고 **그 '일' 에 걸맞는 이름**을 짓는다.
  - 코드 단 한 줄의 메소드라도 의미가 명확해지면 필요.
- 절차
  1. 함수를 새로 만들고 목적을 잘 드러내는 이름을 붙인다.
     - '**무엇을**' 하는지가 드러나야 함. '어떻게' 가 아님.
  2. 추출할 코드를 원본 함수에서 복사하여 새 함수에 붙여넣는다.
  3. 추출한 코드 중 원본 함수의 지역 변수를 참조하거나 추출한 함수의 유효 범위를 벗어나는 변수는 없는지 검사. 있으면 매개변수로 전달.
     - 추출한 코드에서만 사용하는 변수가 추출한 함수 밖에 선언되어 있으면 추출한 함수 안에서 선언하도록 수정
     - 추출한 코드에서 값을 수정하는 지역변수가 너무 많다면 다음과 같은 기법을 먼저 이용해 코드를 단순하게 한 뒤 다시 함수 추출을 시도
       - 변수 쪼개기
       - 임시 변수를 질의 함수로 바꾸기
  4. 변수를 다 처리했다면 컴파일
  5. 원본 함수에서 추출한 코드 부분을 새로 만든 함수를 호출하는 문장으로 변경
  6. 테스트
  7. 다른 코드에 방금 추출한 것과 똑같거나 비슷한 코드가 있는지 확인. 있으면 방금 추출한 함수를 이용할 것인지 검토
- 값을 반환할 변수가 여러개라면?
  - 각각을 반환하는 함수 여러개로 만들거나
  - 한 함수에서 여러 값을 반환해야 하면 한 레코드로 묶어서 반환할 수도.
    - 추출 작업을 다른 방식으로 처리하는게 나을 때가 많음
    - 그럼 임시 변수를 질의 함수로 바꾸거나
    - 변수를 쪼개는 식으로 처리
